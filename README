PartitionedTable

A partitioned table stores all of its rows into 'buckets'
which are defined by specifying a set of fields to partition on. 
Exact matches on any subset of the partitioned fields can then
be executed quickly using redis' glob capability.

The performance is good when using the 'load' command since it saves
on having to marshal many small objects by bulk marshaling an entire
set of rows at one time. This property makes partitioned tables best
for bulk loading and reading.

Preliminary Benchmarks

class ConversionRates < PartitionedTable::Base
  name "benchmark_conversion_rates"
  fields :datasets, :versions, :conversions, :hours, :totals, :successes
  partitions :datasets, :hours
end

Mac Mini
OS X 10.5 Leopard
1.66 GHz Intel Core Duo (2MB L2 Cache)
2GB 667 MHz DDR2 SDRAM

Ruby 1.8.6 patchlevel 114
Redis-rb

Loading 50,000 rows
  1.630000   0.090000   1.720000 (  1.833965)
--------------------------------------------------
Finding all purchases
Length: 16667
  0.140000   0.020000   0.160000 (  0.214237)
--------------------------------------------------
Finding all purchases during hour 100
Length: 70
  0.000000   0.000000   0.000000 (  0.001667)
--------------------------------------------------
Finding 336 hours of data
Length: 23504
  0.260000   0.070000   0.330000 (  0.596081)
--------------------------------------------------
Finding all data
Length: 50000
  0.590000   0.060000   0.650000 (  0.779606)
--------------------------------------------------
Finding 336 hours of cached data
Length: 23504
  0.120000   0.020000   0.140000 (  0.148643)
